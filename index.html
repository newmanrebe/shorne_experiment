
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Number Guessing Game</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Sarah Horne Experiment</h1>
    </br>
    <div id="number">
    </div>
    <div id="wrapper">
        <form class="form">
            <label2 for="guessField" id="guess">Answer</label>
            <input type="text" id="guessField" class="guessField">
            <input type="submit" id="subt" value="Submit" class="guessSubmit">
        </form>
    </div>
    <div id="money">
    <p> val: </p>
    </div>
    <div id="score">
    <p> Score: </p>
    </div>
    <div id="roundformwrapper" style="display:none">
     <h2> In this next set you will need to answer:</h2>
     <h2>1 time to earn cents. </h2>
     <h2> Press continue to participate in this round, or press skip to move on to the next reward level. </h2>
     <form class="roundform">
            <input type="submit" id="cont" value="Continue" class="cont">
            <input type="submit" id="endr" value="End Round" class="endr">
        </form>
    </div>
<script>
let moneyVals = [16, 25, 50];
let curMoneyVal = 0;
let score = 0;
const submit = document.querySelector('#subt');
const userInput = document.querySelector('#guessField');
const roundInfo = document.querySelector('.nextMonetaryVal');
const p = document.createElement('p');
const ans = document.getElementById("wrapper");
const cont = document.getElementById("#cont");
const endr = document.getElementById("#endr");
const newRoundText = document.getElementById("roundformwrapper");
let numGuesses = 0;
let randomNumber = 0;

subt.addEventListener('click', function(e){
            e.preventDefault();
            //Grab guess from user
            const guess = parseInt(userInput.value);
            validateGuess(guess);
        });
    
cont.addEventListener('click', function(e){
    e.preventDefault();
    newRoundText.style.display = "none";
    randomNumber = getRandomInt();
    document.getElementById("number").innerHTML = "<h1>" + randomNumber + "</h1>";
    setTimeout(function(){
      document.getElementById("number").innerHTML="";
      ans.style.visibility = "visible";
    },2000); 
});
    
endr.addEventListener('click', function(e){
    e.preventDefault();
    curMoneyVal++
    numGuesses = 0;
    playRound()
});  
document.getElementById("money").innerHTML = `<h3>Current monetary value: ${moneyVals[curMoneyVal]}</h3> cents.`;
playRound();

function shouldPlay() {
  return numGuesses < 16 && curMoneyVal < 3;
}
    
function newRound() {
  return numGuesses === 0;   
}

function playRound() {
    if (shouldPlay()) {
      ans.style.visibility = "hidden";
      if (newRound()) {
        newRoundText.style.display = "block";
      } 
    } else {
      alert("Final Score: " + score.toString());
    }
    
}

function getRandomInt() {
  return Math.floor(10 + (Math.random() * 89));
}

function reverseString(str) {
    return str.split("").reverse().join("");
}

function validateGuess(guess){
    if (isNaN(guess)){
        alert('Please enter a valid number');
    } else {
        checkGuess(guess);
    }
}

function checkGuess(guess){
  if (guess.toString() === reverseString(randomNumber.toString())){
       numGuesses++;
       score += moneyVals[curMoneyVal];
  } else {
    curMoneyVal++;
    alert("Incorrect response");
  }
  if (numGuesses === 16) {
    numGuesses = 0;
    curMoneyVal++;
      
  }
  userInput.value = '';
  document.getElementById("score").innerHTML = `<h3>Score: ${score}</h3>`
  document.getElementById("money").innerHTML = `<h3>Current monetary value: ${moneyVals[curMoneyVal]}</h3>`;
  playRound();
}

</script>
</body>

</html>
